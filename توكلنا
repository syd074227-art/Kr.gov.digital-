<!DOCTYPE html>

<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>هيئة KR الرقمية - منصة الخدمات</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #1a237e;
            --primary-dark: #0d1557;
            --primary-light: #3f51b5;
            --accent: #00c853;
            --accent-glow: rgba(0, 200, 83, 0.4);
            --gold: #ffd700;
            --dark: #0a0e27;
            --card-bg: rgba(26, 35, 126, 0.1);
            --glass: rgba(255, 255, 255, 0.05);
            --border: rgba(255, 255, 255, 0.1);
        }

```
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: 'Segoe UI', 'Cairo', sans-serif;
    }

    body {
        background: linear-gradient(135deg, #0a0e27 0%, #1a237e 50%, #0a0e27 100%);
        color: white;
        min-height: 100vh;
        overflow-x: hidden;
        position: relative;
    }

    /* خلفية متحركة */
    .bg-animation {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: 0;
        overflow: hidden;
        pointer-events: none;
    }

    .particle {
        position: absolute;
        width: 3px;
        height: 3px;
        background: var(--accent);
        border-radius: 50%;
        animation: float 15s infinite;
        box-shadow: 0 0 10px var(--accent-glow);
    }

    @keyframes float {
        0%, 100% { transform: translateY(0) translateX(0); opacity: 0; }
        10% { opacity: 1; }
        90% { opacity: 1; }
        100% { transform: translateY(-100vh) translateX(50px); opacity: 0; }
    }

    /* الهيدر الفخم */
    .main-header {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        background: rgba(10, 14, 39, 0.95);
        backdrop-filter: blur(20px);
        border-bottom: 1px solid var(--border);
        padding: 15px 30px;
        z-index: 1000;
        box-shadow: 0 5px 30px rgba(0, 0, 0, 0.5);
    }

    .header-content {
        display: flex;
        justify-content: space-between;
        align-items: center;
        max-width: 1400px;
        margin: 0 auto;
    }

    .user-section {
        display: flex;
        align-items: center;
        gap: 15px;
        cursor: pointer;
        padding: 8px 15px;
        border-radius: 50px;
        transition: all 0.3s;
    }

    .user-section:hover {
        background: var(--glass);
    }

    .user-avatar {
        width: 45px;
        height: 45px;
        border-radius: 50%;
        border: 2px solid var(--accent);
        object-fit: cover;
        box-shadow: 0 0 15px var(--accent-glow);
        animation: pulse-border 2s infinite;
    }

    @keyframes pulse-border {
        0%, 100% { box-shadow: 0 0 15px var(--accent-glow); }
        50% { box-shadow: 0 0 25px var(--accent-glow), 0 0 35px var(--accent-glow); }
    }

    .user-info h3 {
        font-size: 16px;
        font-weight: 700;
        margin-bottom: 3px;
    }

    .user-status {
        font-size: 12px;
        color: var(--accent);
        display: flex;
        align-items: center;
        gap: 5px;
    }

    .search-container {
        flex: 1;
        max-width: 500px;
        position: relative;
        margin: 0 30px;
    }

    .search-input {
        width: 100%;
        padding: 12px 50px 12px 20px;
        background: var(--glass);
        border: 2px solid var(--border);
        border-radius: 50px;
        color: white;
        font-size: 14px;
        transition: all 0.3s;
    }

    .search-input:focus {
        outline: none;
        border-color: var(--accent);
        box-shadow: 0 0 20px var(--accent-glow);
        background: rgba(255, 255, 255, 0.08);
    }

    .search-btn {
        position: absolute;
        left: 10px;
        top: 50%;
        transform: translateY(-50%);
        background: linear-gradient(135deg, var(--accent), #00e676);
        border: none;
        width: 35px;
        height: 35px;
        border-radius: 50%;
        color: white;
        cursor: pointer;
        transition: all 0.3s;
    }

    .search-btn:hover {
        transform: translateY(-50%) scale(1.1);
        box-shadow: 0 5px 20px var(--accent-glow);
    }

    /* المحتوى الرئيسي */
    .main-content {
        padding-top: 90px;
        padding-bottom: 100px;
        position: relative;
        z-index: 1;
    }

    .container {
        max-width: 1400px;
        margin: 0 auto;
        padding: 0 30px;
    }

    /* البطاقة الرئيسية للهوية */
    .id-card-section {
        margin: 30px 0 50px;
        perspective: 1500px;
    }

    .id-card-3d {
        width: 100%;
        max-width: 450px;
        margin: 0 auto;
        transform-style: preserve-3d;
        transition: transform 0.6s;
        cursor: pointer;
    }

    .id-card-3d:hover {
        transform: rotateY(10deg) rotateX(5deg);
    }

    .id-card-inner {
        background: linear-gradient(135deg, var(--primary), var(--primary-light), var(--accent));
        border-radius: 25px;
        padding: 35px;
        box-shadow: 
            0 20px 60px rgba(0, 0, 0, 0.6),
            0 0 0 1px rgba(255, 255, 255, 0.1),
            inset 0 1px 0 rgba(255, 255, 255, 0.2);
        position: relative;
        overflow: hidden;
        animation: card-glow 3s infinite;
    }

    @keyframes card-glow {
        0%, 100% { box-shadow: 0 20px 60px rgba(0, 0, 0, 0.6), 0 0 30px var(--accent-glow); }
        50% { box-shadow: 0 25px 70px rgba(0, 0, 0, 0.7), 0 0 50px var(--accent-glow); }
    }

    .id-card-inner::before {
        content: '';
        position: absolute;
        top: -50%;
        left: -50%;
        width: 200%;
        height: 200%;
        background: linear-gradient(45deg, transparent, rgba(255, 255, 255, 0.1), transparent);
        transform: rotate(45deg);
        animation: card-shine 3s infinite;
    }

    @keyframes card-shine {
        0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
        100% { transform: translateX(100%) translateY(100%) rotate(45deg); }
    }

    .card-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 30px;
        position: relative;
        z-index: 1;
    }

    .card-logo {
        font-size: 35px;
        animation: float-logo 3s ease-in-out infinite;
    }

    @keyframes float-logo {
        0%, 100% { transform: translateY(0); }
        50% { transform: translateY(-10px); }
    }

    .card-badge {
        background: rgba(255, 255, 255, 0.2);
        padding: 8px 18px;
        border-radius: 50px;
        font-size: 12px;
        font-weight: 700;
        letter-spacing: 1px;
        backdrop-filter: blur(10px);
    }

    .card-body {
        display: flex;
        align-items: center;
        gap: 25px;
        margin-bottom: 25px;
        position: relative;
        z-index: 1;
    }

    .card-avatar {
        width: 100px;
        height: 100px;
        border-radius: 50%;
        border: 3px solid white;
        object-fit: cover;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.4);
    }

    .card-info h2 {
        font-size: 24px;
        margin-bottom: 8px;
        font-weight: 800;
    }

    .card-id {
        font-size: 14px;
        opacity: 0.9;
        letter-spacing: 2px;
        direction: ltr;
        text-align: right;
    }

    .card-footer {
        display: flex;
        justify-content: space-between;
        padding-top: 20px;
        border-top: 1px solid rgba(255, 255, 255, 0.2);
        position: relative;
        z-index: 1;
    }

    .card-detail {
        text-align: center;
    }

    .card-detail-label {
        font-size: 11px;
        opacity: 0.8;
        margin-bottom: 5px;
    }

    .card-detail-value {
        font-size: 15px;
        font-weight: 700;
    }

    /* الأقسام */
    .section {
        margin: 50px 0;
        opacity: 0;
        transform: translateY(30px);
        animation: section-appear 0.6s forwards;
    }

    @keyframes section-appear {
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    .section-title {
        font-size: 28px;
        font-weight: 800;
        margin-bottom: 25px;
        display: flex;
        align-items: center;
        gap: 15px;
        background: linear-gradient(135deg, white, var(--accent));
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
    }

    .section-title i {
        font-size: 32px;
        background: var(--accent);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
    }

    /* شبكة الخدمات */
    .services-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 25px;
    }

    .service-card {
        background: var(--glass);
        backdrop-filter: blur(20px);
        border: 1px solid var(--border);
        border-radius: 20px;
        padding: 30px;
        cursor: pointer;
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        position: relative;
        overflow: hidden;
        transform-style: preserve-3d;
    }

    .service-card::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(135deg, var(--accent), var(--primary));
        opacity: 0;
        transition: opacity 0.4s;
        z-index: 0;
    }

    .service-card:hover::before {
        opacity: 0.1;
    }

    .service-card:hover {
        transform: translateY(-10px) scale(1.02);
        border-color: var(--accent);
        box-shadow: 
            0 20px 50px rgba(0, 0, 0, 0.5),
            0 0 30px var(--accent-glow);
    }

    .service-icon {
        width: 70px;
        height: 70px;
        border-radius: 18px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 32px;
        margin-bottom: 20px;
        position: relative;
        z-index: 1;
        background: linear-gradient(135deg, var(--accent), #00e676);
        box-shadow: 0 10px 30px var(--accent-glow);
        animation: icon-float 3s ease-in-out infinite;
    }

    @keyframes icon-float {
        0%, 100% { transform: translateY(0) rotate(0deg); }
        50% { transform: translateY(-8px) rotate(5deg); }
    }

    .service-title {
        font-size: 20px;
        font-weight: 700;
        margin-bottom: 10px;
        position: relative;
        z-index: 1;
    }

    .service-desc {
        font-size: 14px;
        color: rgba(255, 255, 255, 0.7);
        line-height: 1.6;
        position: relative;
        z-index: 1;
    }

    /* التصنيفات */
    .categories-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 20px;
    }

    .category-card {
        background: var(--glass);
        backdrop-filter: blur(20px);
        border: 1px solid var(--border);
        border-radius: 20px;
        padding: 30px 20px;
        text-align: center;
        cursor: pointer;
        transition: all 0.4s;
        position: relative;
        overflow: hidden;
    }

    .category-card::after {
        content: '';
        position: absolute;
        top: 50%;
        left: 50%;
        width: 0;
        height: 0;
        border-radius: 50%;
        background: radial-gradient(circle, var(--accent) 0%, transparent 70%);
        transform: translate(-50%, -50%);
        transition: width 0.6s, height 0.6s;
        opacity: 0;
    }

    .category-card:hover::after {
        width: 300px;
        height: 300px;
        opacity: 0.2;
    }

    .category-card:hover {
        transform: translateY(-8px);
        border-color: var(--accent);
        box-shadow: 0 15px 40px rgba(0, 0, 0, 0.4);
    }

    .category-icon {
        width: 80px;
        height: 80px;
        margin: 0 auto 20px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 36px;
        transition: all 0.4s;
        position: relative;
        z-index: 1;
    }

    .category-card:hover .category-icon {
        transform: scale(1.1) rotate(360deg);
    }

    .category-name {
        font-size: 16px;
        font-weight: 600;
        position: relative;
        z-index: 1;
    }

    /* الرسائل */
    .messages-list {
        background: var(--glass);
        backdrop-filter: blur(20px);
        border: 1px solid var(--border);
        border-radius: 20px;
        overflow: hidden;
    }

    .message-item {
        padding: 25px;
        border-bottom: 1px solid var(--border);
        cursor: pointer;
        transition: all 0.3s;
        position: relative;
    }

    .message-item:last-child {
        border-bottom: none;
    }

    .message-item::before {
        content: '';
        position: absolute;
        right: 0;
        top: 0;
        width: 4px;
        height: 100%;
        background: var(--accent);
        transform: scaleY(0);
        transition: transform 0.3s;
    }

    .message-item:hover::before {
        transform: scaleY(1);
    }

    .message-item:hover {
        background: rgba(255, 255, 255, 0.05);
        padding-right: 35px;
    }

    .message-header {
        display: flex;
        justify-content: space-between;
        margin-bottom: 10px;
    }

    .message-title {
        font-weight: 700;
        font-size: 16px;
    }

    .message-date {
        font-size: 12px;
        color: rgba(255, 255, 255, 0.5);
    }

    .message-content {
        font-size: 14px;
        color: rgba(255, 255, 255, 0.7);
        line-height: 1.6;
    }

    /* معلومات المستخدم */
    .profile-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 20px;
    }

    .info-card {
        background: var(--glass);
        backdrop-filter: blur(20px);
        border: 1px solid var(--border);
        border-radius: 20px;
        padding: 25px;
        transition: all 0.3s;
    }

    .info-card:hover {
        transform: translateX(-5px);
        border-color: var(--accent);
    }

    .info-label {
        font-size: 13px;
        color: rgba(255, 255, 255, 0.6);
        margin-bottom: 8px;
        display: flex;
        align-items: center;
        gap: 8px;
    }

    .info-value {
        font-size: 18px;
        font-weight: 700;
    }

    /* الشريط السفلي */
    .bottom-nav {
        position: fixed;
        bottom: 0;
        left: 0;
        right: 0;
        background: rgba(10, 14, 39, 0.98);
        backdrop-filter: blur(20px);
        border-top: 1px solid var(--border);
        padding: 12px 0;
        z-index: 1000;
        box-shadow: 0 -5px 30px rgba(0, 0, 0, 0.5);
    }

    .nav-container {
        max-width: 1400px;
        margin: 0 auto;
        display: flex;
        justify-content: space-around;
        align-items: center;
    }

    .nav-item {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 5px;
        padding: 8px 25px;
        cursor: pointer;
        transition: all 0.3s;
        border-radius: 15px;
        position: relative;
        color: rgba(255, 255, 255, 0.6);
    }

    .nav-item::before {
        content: '';
        position: absolute;
        top: -3px;
        left: 50%;
        transform: translateX(-50%);
        width: 0;
        height: 3px;
        background: var(--accent);
        border-radius: 3px;
        transition: width 0.3s;
    }

    .nav-item.active::before {
        width: 70%;
    }

    .nav-item.active {
        color: var(--accent);
    }

    .nav-item:hover {
        background: var(--glass);
        color: white;
    }

    .nav-item i {
        font-size: 22px;
    }

    .nav-item span {
        font-size: 12px;
        font-weight: 600;
    }

    /* الأقسام المخفية */
    .page-section {
        display: none;
        animation: page-fade-in 0.5s;
    }

    .page-section.active {
        display: block;
    }

    @keyframes page-fade-in {
        from {
            opacity: 0;
            transform: translateY(20px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    /* Empty State */
    .empty-state {
        text-align: center;
        padding: 80px 20px;
    }

    .empty-state i {
        font-size: 80px;
        color: rgba(255, 255, 255, 0.1);
        margin-bottom: 20px;
    }

    .empty-state p {
        color: rgba(255, 255, 255, 0.4);
        font-size: 16px;
    }

    /* التجاوب */
    @media (max-width: 768px) {
        .header-content {
            flex-wrap: wrap;
        }

        .search-container {
            order: 3;
            width: 100%;
            margin: 15px 0 0 0;
        }

        .id-card-3d {
            max-width: 100%;
        }

        .services-grid,
        .categories-grid {
            grid-template-columns: 1fr;
        }

        .card-body {
            flex-direction: column;
            text-align: center;
        }

        .card-footer {
            flex-direction: column;
            gap: 15px;
        }

        .nav-item {
            padding: 8px 15px;
        }

        .nav-item span {
            font-size: 10px;
        }
    }
</style>
```

</head>
<body>
    <!-- خلفية متحركة -->
    <div class="bg-animation" id="bgAnimation"></div>

```
<!-- الهيدر -->
<header class="main-header">
    <div class="header-content">
        <div class="user-section" onclick="showPage('profile')">
            <img src="https://via.placeholder.com/100" alt="صورة المستخدم" class="user-avatar" id="headerAvatar">
            <div class="user-info">
                <h3 id="headerName">مرحباً</h3>
                <div class="user-status">
                    <i class="fas fa-shield-check"></i>
                    <span>حساب مفعّل</span>
                </div>
            </div>
        </div>
        
        <div class="search-container">
            <input type="text" class="search-input" placeholder="ابحث عن خدمة..." id="serviceSearch">
            <button class="search-btn">
                <i class="fas fa-search"></i>
            </button>
        </div>

        <div style="display: flex; gap: 15px;">
            <button class="search-btn" onclick="showPage('messages')" style="position: relative;">
                <i class="fas fa-bell"></i>
                <span id="notifBadge" style="position: absolute; top: -5px; right: -5px; background: red; width: 18px; height: 18px; border-radius: 50%; font-size: 10px; display: none; align-items: center; justify-content: center;">0</span>
            </button>
        </div>
    </div>
</header>

<!-- المحتوى الرئيسي -->
<main class="main-content">
    <div class="container">
        <!-- الصفحة الرئيسية -->
        <div class="page-section active" id="homePage">
            <!-- بطاقة الهوية الرقمية -->
            <div class="id-card-section">
                <div class="id-card-3d" onclick="viewFullCard()">
                    <div class="id-card-inner">
                        <div class="card-header">
                            <div class="card-logo">
                                <i class="fas fa-shield-alt"></i>
                            </div>
                            <div class="card-badge">KR DIGITAL</div>
                        </div>
                        
                        <div class="card-body">
                            <img src="https://via.placeholder.com/100" alt="صورة المستخدم" class="card-avatar" id="cardAvatar">
                            <div class="card-info">
                                <h2 id="cardName">اسم المستخدم</h2>
                                <div class="card-id" id="cardId">0000000000</div>
                            </div>
                        </div>
                        
                        <div class="card-footer">
                            <div class="card-detail">
                                <div class="card-detail-label">الوزارة</div>
                                <div class="card-detail-value" id="cardDept">-</div>
                            </div>
                            <div class="card-detail">
                                <div class="card-detail-label">الرتبة</div>
                                <div class="card-detail-value" id="cardRank">-</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- الخدمات -->
            <div class="section" style="animation-delay: 0.2s;">
                <h2 class="section-title">
                    <i class="fas fa-th-large"></i>
                    الخدمات المتاحة
                </h2>
                <div class="services-grid">
                    <div class="service-card" style="animation-delay: 0.1s;">
                        <div class="service-icon" style="background: linear-gradient(135deg, #667eea, #764ba2);">
                            <i class="fas fa-id-card-alt"></i>
                        </div>
                        <h3 class="service-title">عرض بطاقة الهوية</h3>
                        <p class="service-desc">اطلع على بطاقة هويتك الرقمية الكاملة</p>
                    </div>

                    <div class="service-card" style="animation-delay: 0.2s;">
                        <div class="service-icon" style="background: linear-gradient(135deg, #f093fb, #f5576c);">
                            <i class="fas fa-file-certificate"></i>
                        </div>
                        <h3 class="service-title">الشهادات والوثائق</h3>
                        <p class="service-desc">احصل على شهاداتك الرسمية</p>
                    </div>

                    <div class="service-card" style="animation-delay: 0.3s;">
                        <div class="service-icon" style="background: linear-gradient(135deg, #fa709a, #fee140);">
                            <i class="fas fa-heartbeat"></i>
                        </div>
                        <h3 class="service-title">الخدمات الصحية</h3>
                        <p class="service-desc">احجز موعداً أو اطلب خدمة صحية</p>
                    </div>

                    <div class="service-card" style="animation-delay: 0.4s;">
                        <div class="service-icon" style="background: linear-gradient(135deg, #81fbb8, #28c76f);">
                            <i class="fas fa-car"></i>
                        </div>
                        <h3 class="service-title">خدمات المرور</h3>
                        <p class="service-desc">جدد رخصتك أو استعلم عن المخالفات</p>
                    </div>

                    <div class="service-card" style="animation-delay: 0.5s;">
                        <div class="service-icon" style="background: linear-gradient(135deg, #a8edea, #fed6e3);">
                            <i class="fas fa-university"></i>
                        </div>
                        <h3 class="service-title">الخدمات الحكومية</h3>
                        <p class="service-desc">تصفح جميع الخدمات الحكومية</p>
                    </div>

                    <div class="service-card" style="animation-delay: 0.6s;">
                        <div class="service-icon" style="background: linear-gradient(135deg, #ffecd2, #fcb69f);">
                            <i class="fas fa-briefcase"></i>
                        </div>
                        <h3 class="service-title">الخدمات الوظيفية</h3>
                        <p class="service-desc">راتبك ومستحقاتك الوظيفية</p>
                    </div>
                </div>
            </div>

            <!-- التصنيفات -->
            <div class="section" style="animation-delay: 0.4s;">
                <h2 class="section-title">
                    <i class="fas fa-layer-group"></i>
                    استكشف التصنيفات
                </h2>
                <div class="categories-grid">
                    <div class="category-card">
                        <div class="category-icon" style="background: linear-gradient(135deg, #f6d365, #fda085);">
                            <i class="fas fa-mosque"></i>
                        </div>
                        <div class="category-name">الدينية</div>
                    </div>

                    <div class="category-card">
                        <div class="category-icon" style="background: linear-gradient(135deg, #fa709a, #fee140);">
                            <i class="fas fa-heartbeat"></i>
                        </div>
                        <div class="category-name">الصحة</div>
                    </div>

                    <div class="category-card">
                        <div class="category-icon" style="background: linear-gradient(135deg, #a8edea, #fed6e3);">
                            <i class="fas fa-users"></i>
                        </div>
                        <div class="category-name">الشخصية والأسرة</div>
                    </div>

                    <div class="category-card">
                        <div class="category-icon" style="background: linear-gradient(135deg, #81fbb8, #28c76f);">
                            <i class="fas fa-car"></i>
                        </div>
                        <div class="category-name">المركبات والمرور</div>
                    </div>

                    <div class="category-card">
                        <div class="category-icon" style="background: linear-gradient(135deg, #667eea, #764ba2);">
                            <i class="fas fa-coins"></i>
                        </div>
                        <div class="category-name">التجارة والمالية</div>
                    </div>

                    <div class="category-card">
                        <div class="category-icon" style="background: linear-gradient(135deg, #f093fb, #f5576c);">
                            <i class="fas fa-graduation-cap"></i>
                        </div>
                        <div class="category-name">التعليم</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- صفحة الخدمات -->
        <div class="page-section" id="servicesPage">
            <div class="section">
                <h2 class="section-title">
                    <i class="fas fa-th-large"></i>
                    جميع الخدمات
                </h2>
                <div class="empty-state">
                    <i class="fas fa-cog"></i>
                    <p>جاري تحميل الخدمات...</p>
                </div>
            </div>
        </div>

        <!-- صفحة الرسائل -->
        <div class="page-section" id="messagesPage">
            <div class="section">
                <h2 class="section-title">
                    <i class="fas fa-envelope"></i>
                    الرسائل والإشعارات
                </h2>
                <div class="messages-list" id="messagesList">
                    <div class="empty-state">
                        <i class="fas fa-inbox"></i>
                        <p>لا توجد رسائل</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- صفحة معلوماتي -->
        <div class="page-section" id="profilePage">
            <div class="section">
                <h2 class="section-title">
                    <i class="fas fa-user-circle"></i>
                    معلوماتي الشخصية
                </h2>
                
                <div style="text-align: center; margin-bottom: 40px;">
                    <img src="https://via.placeholder.com/120" alt="صورة المستخدم" class="card-avatar" id="profileAvatar" style="width: 120px; height: 120px; margin: 0 auto;">
                    <h2 style="margin-top: 20px; font-size: 28px;" id="profileName">اسم المستخدم</h2>
                    <p style="color: var(--accent); margin-top: 10px;">
                        <i class="fas fa-shield-check"></i>
                        حساب مفعّل ومؤمّن
                    </p>
                </div>

                <div class="profile-grid" id="profileGrid">
                    <!-- سيتم ملؤها بواسطة JavaScript -->
                </div>
            </div>
        </div>
    </div>
</main>

<!-- الشريط السفلي -->
<nav class="bottom-nav">
    <div class="nav-container">
        <div class="nav-item active" onclick="showPage('home')">
            <i class="fas fa-home"></i>
            <span>الرئيسية</span>
        </div>
        <div class="nav-item" onclick="showPage('services')">
            <i class="fas fa-th-large"></i>
            <span>الخدمات</span>
        </div>
        <div class="nav-item" onclick="showPage('messages')">
            <i class="fas fa-envelope"></i>
            <span>الرسائل</span>
        </div>
        <div class="nav-item" onclick="showPage('profile')">
            <i class="fas fa-user"></i>
            <span>معلوماتي</span>
        </div>
    </div>
</nav>

<script>
    let currentUser = null;

    // تهيئة الصفحة
    document.addEventListener('DOMContentLoaded', function() {
        createParticles();
        loadUserData();
        loadMessages();
    });

    // إنشاء الجزيئات المتحركة
    function createParticles() {
        const container = document.getElementById('bgAnimation');
        for (let i = 0; i < 50; i++) {
            const particle = document.createElement('div');
            particle.className = 'particle';
            particle.style.left = Math.random() * 100 + '%';
            particle.style.animationDelay = Math.random() * 15 + 's';
            particle.style.animationDuration = (15 + Math.random() * 10) + 's';
            container.appendChild(particle);
        }
    }

    // تحميل بيانات المستخدم
    function loadUserData() {
        const deviceId = localStorage.getItem('device_id');
        if (!deviceId) {
            // بيانات تجريبية للعرض التوضيحي
            currentUser = {
                fullName: 'محمد أحمد السعيد',
                id: '1234567890',
                departmentName: 'وزارة الداخلية',
                rank: 'ملازم أول',
                age: 28,
                gameUsername: 'mohammed_sa',
                discordUsername: 'MohammedSa#1234',
                activationDate: new Date().toISOString()
            };
        } else {
            const activatedUsers = JSON.parse(localStorage.getItem('activated_users') || '[]');
            currentUser = activatedUsers.find(u => u.deviceId === deviceId);

            if (!currentUser) {
                currentUser = {
                    fullName: 'مستخدم جديد',
                    id: '0000000000',
                    departmentName: '-',
                    rank: '-',
                    age: 0,
                    gameUsername: '-',
                    discordUsername: '-',
                    activationDate: new Date().toISOString()
                };
            }
        }

        // عرض البيانات
        const firstName = currentUser.fullName.split(' ')[0];
        document.getElementById('headerName').textContent = `مرحباً، ${firstName}`;
        document.getElementById('cardName').textContent = currentUser.fullName;
        document.getElementById('cardId').textContent = currentUser.id;
        document.getElementById('cardDept').textContent = currentUser.departmentName;
        document.getElementById('cardRank').textContent = currentUser.rank;
        document.getElementById('profileName').textContent = currentUser.fullName;

        // عرض الصور
        if (currentUser.characterImage && currentUser.characterImage.data) {
            const imageUrl = currentUser.characterImage.data;
            document.getElementById('headerAvatar').src = imageUrl;
            document.getElementById('cardAvatar').src = imageUrl;
            document.getElementById('profileAvatar').src = imageUrl;
        }

        // عرض المعلومات الشخصية
        renderProfileInfo();
    }

    // عرض المعلومات الشخصية
    function renderProfileInfo() {
        const grid = document.getElementById('profileGrid');
        
        let additionalsHTML = '';
        if (currentUser.additionals && currentUser.additionals.length > 0) {
            additionalsHTML = `
                <div class="info-card">
                    <div class="info-label">
                        <i class="fas fa-briefcase"></i>
                        المناصب الإدارية
                    </div>
                    <div class="info-value">${currentUser.additionals.join(' • ')}</div>
                </div>
            `;
        }

        grid.innerHTML = `
            <div class="info-card">
                <div class="info-label">
                    <i class="fas fa-fingerprint"></i>
                    رقم الهوية
                </div>
                <div class="info-value" dir="ltr">${currentUser.id}</div>
            </div>
            <div class="info-card">
                <div class="info-label">
                    <i class="fas fa-calendar-alt"></i>
                    العمر
                </div>
                <div class="info-value">${currentUser.age} سنة</div>
            </div>
            <div class="info-card">
                <div class="info-label">
                    <i class="fas fa-gamepad"></i>
                    اسم المستخدم (اللعبة)
                </div>
                <div class="info-value">${currentUser.gameUsername}</div>
            </div>
            <div class="info-card">
                <div class="info-label">
                    <i class="fab fa-discord"></i>
                    اسم المستخدم (ديسكورد)
                </div>
                <div class="info-value">${currentUser.discordUsername}</div>
            </div>
            <div class="info-card">
                <div class="info-label">
                    <i class="fas fa-building"></i>
                    الوزارة/التصنيف
                </div>
                <div class="info-value">${currentUser.departmentName}</div>
            </div>
            <div class="info-card">
                <div class="info-label">
                    <i class="fas fa-medal"></i>
                    الرتبة
                </div>
                <div class="info-value">${currentUser.rank}</div>
            </div>
            ${additionalsHTML}
            <div class="info-card">
                <div class="info-label">
                    <i class="fas fa-check-circle"></i>
                    تاريخ التفعيل
                </div>
                <div class="info-value">${new Date(currentUser.activationDate).toLocaleDateString('ar-SA')}</div>
            </div>
        `;
    }

    // تحميل الرسائل
    function loadMessages() {
        const deviceId = localStorage.getItem('device_id');
        let notifications = [];
        
        if (deviceId) {
            notifications = JSON.parse(localStorage.getItem('user_notifications_' + deviceId) || '[]');
        }
        
        if (notifications.length === 0) {
            return;
        }

        // عرض عدد الرسائل غير المقروءة
        const unreadCount = notifications.filter(n => !n.read).length;
        if (unreadCount > 0) {
            const badge = document.getElementById('notifBadge');
            badge.textContent = unreadCount;
            badge.style.display = 'flex';
        }

        const container = document.getElementById('messagesList');
        container.innerHTML = notifications.map(notif => `
            <div class="message-item" onclick="markAsRead('${notif.id}')">
                <div class="message-header">
                    <div class="message-title">
                        <i class="fas fa-${notif.type === 'success' ? 'check-circle' : 
                                           notif.type === 'error' ? 'times-circle' : 
                                           'info-circle'}"></i>
                        ${notif.title}
                    </div>
                    <div class="message-date">${notif.date}</div>
                </div>
                <div class="message-content">${notif.message}</div>
            </div>
        `).join('');
    }

    // تحديد كمقروء
    function markAsRead(notifId) {
        const deviceId = localStorage.getItem('device_id');
        if (!deviceId) return;
        
        let notifications = JSON.parse(localStorage.getItem('user_notifications_' + deviceId) || '[]');
        
        notifications = notifications.map(notif => {
            if (notif.id === notifId) {
                notif.read = true;
            }
            return notif;
        });
        
        localStorage.setItem('user_notifications_' + deviceId, JSON.stringify(notifications));
        loadMessages();
    }

    // التنقل بين الصفحات
    function showPage(pageName) {
        // إخفاء جميع الصفحات
        document.querySelectorAll('.page-section').forEach(page => {
            page.classList.remove('active');
        });

        // إزالة active من جميع عناصر القائمة
        document.querySelectorAll('.nav-item').forEach(item => {
            item.classList.remove('active');
        });

        // عرض الصفحة المطلوبة
        if (pageName === 'home') {
            document.getElementById('homePage').classList.add('active');
            document.querySelectorAll('.nav-item')[0].classList.add('active');
        } else if (pageName === 'services') {
            document.getElementById('servicesPage').classList.add('active');
            document.querySelectorAll('.nav-item')[1].classList.add('active');
        } else if (pageName === 'messages') {
            document.getElementById('messagesPage').classList.add('active');
            document.querySelectorAll('.nav-item')[2].classList.add('active');
            loadMessages();
        } else if (pageName === 'profile') {
            document.getElementById('profilePage').classList.add('active');
            document.querySelectorAll('.nav-item')[3].classList.add('active');
        }

        // التمرير للأعلى
        window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    // عرض بطاقة الهوية الكاملة
    function viewFullCard() {
        if (!currentUser.nationalIdImage || !currentUser.nationalIdImage.data) {
            alert('لا توجد صورة هوية متاحة');
            return;
        }

        const modal = document.createElement('div');
        modal.style.cssText = `
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.95);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            animation: fadeIn 0.3s;
        `;
        
        modal.innerHTML = `
            <div style="position: relative; max-width: 90%; max-height: 90vh;">
                <img src="${currentUser.nationalIdImage.data}" 
                     style="max-width: 100%; max-height: 90vh; border-radius: 15px; box-shadow: 0 20px 60px rgba(0, 0, 0, 0.8);">
                <button onclick="this.parentElement.parentElement.remove()" 
                        style="position: absolute; top: 15px; left: 15px; background: white; border: none; 
                               width: 45px; height: 45px; border-radius: 50%; cursor: pointer; font-size: 20px; box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);">
                    <i class="fas fa-times"></i>
                </button>
            </div>
        `;
        
        document.body.appendChild(modal);
        modal.onclick = (e) => {
            if (e.target === modal) modal.remove();
        };
    }
</script>
```

</body>
</html>
